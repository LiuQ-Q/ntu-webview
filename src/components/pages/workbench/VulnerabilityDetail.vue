<template>
  <b-container>
    <div class="mb-5">
      <h1>漏洞详情</h1>
    </div>

    <b-table
      :fields="[
        { key: 'problem', label: '问题' },
        { key: 'deal', label: '对此问题的处理' },
      ]" 
      :items='items'
      class="vulnerability-detail-overview"
    >
      <template slot="problem">
        <b-link>CVE-2018-1999010</b-link>
        <p>
          <small>FFmpeg before commit cced03dd667a5df6df8fd40d8de0bff477ee02e8 contains multiple out of array access vulnerabilities in the mms protocol that can result in attackers accessing out of bound data. This attack appear to be exploitable via network connectivity. This vulnerability appears to have been fixed in cced03dd667a5df6df8fd40d8de0bff477ee02e8 and later.</small>
        </p>

        <b-table
          :fields="[
            { key: 'detail-col-a', label: '详情:' },
            { key: 'detail-col-b', label: '' },
            { key: 'detail-col-c', label: '' }
          ]"
          :items="[{}]"
          class="detail-overview-desc"
          borderless
        >
          <template
            slot="detail-col-a"
            slot-scope="detailData"
          >
            <p>问题来源:</p>
            <p>版本:</p>
            <p class="mb-0">Security Vector</p>
            <p class="mb-0"><small>Security Vector:</small></p>
            <p class="mb-0"><small>Security Vector:</small></p>
            <p class="mb-0"><small>Security Vector:</small></p>
            <p class="mb-0"><small>Security Vector:</small></p>
          </template>

          <template
            slot="detail-col-b"
            slot-scope="detailData"
          >
            <p>严重性:</p>          
            <p>补丁版本:</p>          
            <p>起源:</p>          
          </template>

          <template
            slot="detail-col-c"
            slot-scope="detailData"
          >
            <p>来源:</p>
            <p>&nbsp;</p>
            <p>相关组件:</p>
          </template>
        </b-table>
      </template>

      <template slot="deal">
        <p class="mb-2">状态:</p>
        <b-form-select
          v-model="problemStatus"
          size='sm'
          class="mb-2"
        >
          <option value="default">未设置</option>
          <option value="high">高</option>
          <option value="medium">中</option>
          <option value="low">低</option>
        </b-form-select>

        <p class="mb-2">优先级:</p>
        <b-form-select
          v-model="problemPriority"
          size='sm'
          class="mb-2"
        >
          <option value="default">未设置</option>
          <option value="ignore">忽略</option>
          <option value="wait">待修复</option>
          <option value="already">已修复</option>
        </b-form-select>

        <p class="mb-2">负责人:</p>
        <b-form-select
          v-model="problemPrincipal"
          size='sm'
          class="mb-2"
        >
          <option value="default">未设置</option>
          <option value="test1">test1</option>
        </b-form-select>

        <p>评价:</p>
        <b-form-textarea
          v-model="problemComment"
          placeholder="请添加评价..."
          rows="3"
          max-rows="6"
          class="mb-3"
        ></b-form-textarea>

        <b-button style="float:left;">提交</b-button>

        <b-dropdown text="操作" style="float:left;" class="ml-3">
          <b-dropdown-item>压制此问题</b-dropdown-item>
          <b-dropdown-item>创建JIRA门票</b-dropdown-item>
        </b-dropdown>
      </template>
    </b-table>

    <div>
      受攻击代码片段......
    </div>
  </b-container>
</template>

<script>
export default {
  data() {
    return {
      items: [{}],
      problemStatus: 'default',
      problemPriority: 'default',
      problemPrincipal: 'default',
      problemComment: ''
    }
  }
}
</script>

<style lang='less'>
.vulnerability-detail-overview {
  td:nth-child(1) {
    width: 60%;
  }

  .detail-overview-desc {
    // width: 80%;
    td {
      width: 33.33%;
    }
  }
}
</style>
